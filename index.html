<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Bußgeldrechner – LSPD / Justiz</title>
<style>
  :root {
    --bg-body: #0a0a0a;
    --bg-panel: #111111;
    --bg-input: #1a1a1a;
    --accent-orange: #d18a2c;
    --accent-red: #e63946;
    --accent-blue: #1d4ed8;
    --text-main: #ffffff;
    --text-dim: #999;
  }

  body {
    margin: 0;
    background: var(--bg-body);
    color: var(--text-main);
    font-family: 'Segoe UI', Roboto, sans-serif;
    overflow-x: hidden;
  }

  /* Header & Search */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: #000;
    border-bottom: 1px solid #222;
  }

  .logo { font-weight: bold; font-size: 1.2rem; }
  .search-input {
    background: var(--bg-input);
    border: 1px solid #333;
    color: #fff;
    padding: 6px 12px;
    border-radius: 4px;
    width: 250px;
    font-size: 14px;
  }

  /* Layout */
  .main-wrapper {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 15px;
    padding: 20px;
  }

  .content-panel {
    background: var(--bg-panel);
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #222;
  }

  /* Tabelle Styling */
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  th {
    color: var(--text-main);
    text-align: left;
    padding-bottom: 15px;
    border-bottom: 1px solid #333;
    font-weight: 600;
  }

  td { padding: 8px 5px; border-bottom: 1px solid #1a1a1a; }

  .cat-header {
    color: var(--accent-orange);
    text-align: center;
    padding: 20px 0 10px 0;
    font-weight: bold;
    font-size: 16px;
  }

  .para-col { color: var(--accent-orange); width: 120px; }
  .name-col { color: var(--text-dim); }
  .money-col { text-align: right; width: 100px; }
  .jail-col { text-align: center; width: 100px; }

  /* Sterne */
  .stars { color: #444; cursor: pointer; font-size: 18px; }
  .stars .active { color: var(--accent-orange); }

  /* Right Sidebar Boxes */
  .sidebar { display: flex; flex-direction: column; gap: 15px; }
  
  .box-container {
    background: var(--bg-panel);
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #222;
    text-align: center;
  }

  .box-title { font-weight: bold; margin-bottom: 15px; font-size: 18px; }

  .stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  .stat-card {
    border-radius: 8px;
    padding: 15px 5px;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .stat-red { background: var(--accent-red); margin-bottom: 10px; }
  .stat-blue { background: var(--accent-blue); }
  .stat-dark { background: #000; color: var(--accent-blue); }
  .stat-outline { background: #000; border: 1px solid #333; }

  .summary-box {
    background: #000;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 15px;
    min-height: 80px;
    margin-top: 10px;
    color: #ccc;
    font-size: 13px;
    cursor: pointer;
    text-align: left;
  }

  .btn-reset {
    background: var(--accent-red);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    width: 100%;
    margin-top: 20px;
  }

  .hint-text { color: #4caf50; font-size: 11px; margin-top: 5px; }
  .hidden { display: none; }
</style>
</head>
<body>

<header>
  <div class="logo">Bußgeldrechner – LSPD / Justiz</div>
  <input type="text" class="search-input" placeholder="Nach Tat oder § suchen..." id="searchInput">
</header>

<main class="main-wrapper">
  <section class="content-panel">
    <table>
      <thead>
        <tr>
          <th>Paragraph</th>
          <th>Strafbestand</th>
          <th style="text-align: center;">Haftstrafe</th>
          <th style="text-align: right;">Bußgeld</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        </tbody>
    </table>
  </section>

  <aside class="sidebar">
    <div class="box-container">
      <div class="box-title">Gesamtsumme</div>
      <div class="stats-grid">
        <div class="stat-card stat-red" id="totalMoney">$0</div>
        <div class="stat-card stat-outline" id="totalJail1">0 Min</div>
        <div class="stat-card stat-blue" id="totalJail2">0 Min</div>
        <div class="stat-card stat-dark" id="totalJail3">0 Min</div>
      </div>
    </div>

    <div class="box-container">
      <div class="box-title">Box Zusammenfassung<br><small style="font-size: 12px;">(Klicken zum Kopieren)</small></div>
      <div class="summary-box" id="summaryBox">Wähle Tatbestände durch Sterne aus....</div>
      <div id="copyHint" class="hint-text"></div>
      <button class="btn-reset" onclick="resetAll()">Rechner zurücksetzen</button>
    </div>
  </aside>
</main>

<script>
const data = [
  {
    category: "Straßenverkehrsordnung (StVO)",
    items: [
      { id:"s1", para:"StVO §8", name:"Geschwindigkeitsüberschreitung 10-40 km/h", base:8000 },
      { id:"s2", para:"StVO §24", name:"Fahrerflucht", base:10000, perStar:5000, maxStars:2, jailPerStar:10 },
      { id:"s3", para:"StVO §28", name:"Sharing-Cars mit Anti-Radar wurde nicht aus dem Verkehr gezogen", base:30000, perStar:10000, maxStars:3, jailPerStar:15 }
    ]
  },
  {
    category: "Psychische & Physische Integrität (StGB)",
    items: [
      { id:"g1", para:"StGB §3.1", name:"Beleidigung", base:10000, perStar:5000, maxStars:1, jailPerStar:5 },
      { id:"g2", para:"StGB §2.2", name:"Belästigung", base:10000, perStar:5000, maxStars:1, jailPerStar:10 }
    ]
  }
];

let state = {};

function render() {
  const tbody = document.getElementById("tableBody");
  tbody.innerHTML = "";

  data.forEach(cat => {
    // Kategorie Überschrift
    const catRow = document.createElement("tr");
    catRow.innerHTML = `<td colspan="4" class="cat-header">${cat.category}</td>`;
    tbody.appendChild(catRow);

    cat.items.forEach(item => {
      state[item.id] = state[item.id] || { stars: 0 };
      const row = document.createElement("tr");
      row.className = "item-row";
      row.dataset.search = (item.para + " " + item.name).toLowerCase();
      
      row.innerHTML = `
        <td class="para-col">${item.para}</td>
        <td class="name-col">${item.name}</td>
        <td class="jail-col">${item.perStar ? renderStars(item.id, item.maxStars) : ""}</td>
        <td class="money-col">$${(item.base + (state[item.id].stars * (item.perStar || 0))).toLocaleString()}</td>
      `;
      tbody.appendChild(row);
    });
  });
}

function renderStars(id, max) {
  let html = `<div class="stars" onclick="setStar(event, '${id}')">`;
  for(let i=1; i<=max; i++) {
    const active = state[id].stars >= i ? "active" : "";
    html += `<span data-val="${i}" class="${active}">${state[id].stars >= i ? '★' : '☆'}</span>`;
  }
  return html + `</div>`;
}

window.setStar = (e, id) => {
  const val = parseInt(e.target.dataset.val);
  if(!val) return;
  state[id].stars = (state[id].stars === val) ? val - 1 : val;
  render();
  updateTotal();
};

function updateTotal() {
  let money = 0;
  let jail = 0;
  let selected = [];

  data.forEach(cat => {
    cat.items.forEach(item => {
      if(state[item.id].stars > 0) {
        money += item.base + (state[item.id].stars * (item.perStar || 0));
        jail += (state[item.id].stars * (item.jailPerStar || 0));
        selected.push(item.para);
      }
    });
  });

  document.getElementById("totalMoney").textContent = `$${money.toLocaleString()}`;
  document.getElementById("totalJail1").textContent = `${jail} Min`;
  document.getElementById("totalJail2").textContent = `${jail} Min`;
  document.getElementById("totalJail3").textContent = `${jail} Min`;

  const box = document.getElementById("summaryBox");
  if(selected.length > 0) {
    box.textContent = `Tatbestände: ${selected.join(", ")} | Gesamt: $${money.toLocaleString()} | ${jail} Min Haft.`;
  } else {
    box.textContent = "Wähle Tatbestände durch Sterne aus....";
  }
}

document.getElementById("searchInput").oninput = (e) => {
  const q = e.target.value.toLowerCase();
  document.querySelectorAll(".item-row").forEach(row => {
    row.classList.toggle("hidden", !row.dataset.search.includes(q));
  });
};

document.getElementById("summaryBox").onclick = function() {
  if(this.textContent.includes("Wähle")) return;
  navigator.clipboard.writeText(this.textContent);
  document.getElementById("copyHint").textContent = "✓ Kopiert!";
  setTimeout(() => document.getElementById("copyHint").textContent = "", 2000);
};

function resetAll() {
  Object.keys(state).forEach(k => state[k].stars = 0);
  render();
  updateTotal();
}

render();
</script>
</body>
</html>
