<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>MDT Leitstelle</title>

<style>
:root{
--bg:#0b0e14;--card:#151921;--accent:#ff2e7e;
--border:#21262d;--text:#fff;--muted:#8b949e
}
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:var(--bg);color:var(--text);height:100vh}

/* LOGIN */
#login{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;
background:rgba(10,12,18,.75);backdrop-filter:blur(20px)}
.login-box{background:var(--card);border:1px solid var(--border);
border-radius:18px;padding:30px;width:320px}
.login-box input,button{width:100%;margin:6px 0;padding:10px;border-radius:6px}
input{background:#0a0c10;border:1px solid #333;color:#fff}
button{background:var(--accent);border:none;font-weight:600;cursor:pointer}

/* APP */
#app{display:none;height:100vh}
.topbar{display:flex;gap:6px;background:var(--card);border-bottom:1px solid var(--border);padding:10px}
.tab{padding:6px 12px;border-radius:6px;cursor:pointer;font-size:12px;color:var(--muted)}
.tab.active{background:rgba(255,46,126,.2);color:var(--accent)}

.content{padding:15px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:15px;margin-bottom:15px}
.hidden{display:none}
</style>
</head>

<body>

<div id="login">
<div class="login-box">
<h3>MDT Login</h3>
<input id="user" placeholder="Benutzer">
<input id="pin" type="password" placeholder="PIN">
<button onclick="login()">Login</button>
</div>
</div>

<div id="app">
<div class="topbar">
<div class="tab active" onclick="show('dashboard',this)">Leitstelle</div>
<div class="tab" onclick="show('rechner',this)">Strafrechner</div>
<div class="tab hidden" id="adminTab" onclick="show('admin',this)">Einstellungen</div>
<div class="tab" onclick="logout()">Logout</div>
</div>

<div class="content">

<div id="dashboard">
<div class="card">Leitstellen Übersicht</div>
</div>

<div id="rechner" class="hidden">
<div class="card">
<b>Gesetze</b>
<div id="lawList"></div>
</div>
</div>

<div id="admin" class="hidden">
<div class="card">
<h4>Benutzer</h4>
<input id="newUser" placeholder="User">
<input id="newPin" placeholder="PIN">
<button onclick="addUser()">Hinzufügen</button>
<div id="userList"></div>
</div>

<div class="card">
<h4>Gesetze bearbeiten</h4>
<input id="lawName" placeholder="Paragraph">
<input id="lawDesc" placeholder="Beschreibung">
<input id="lawWanted" placeholder="Wanteds">
<input id="lawFine" placeholder="Geld">
<button onclick="addLaw()">Gesetz hinzufügen</button>
</div>
</div>

</div>
</div>

<script>
/* STORAGE INIT */
if(!localStorage.users){
localStorage.users=JSON.stringify([
{u:"ADMIN",p:"9999",r:"admin"},
{u:"LSPD",p:"1234",r:"user"}
])
}
if(!localStorage.laws){
localStorage.laws=JSON.stringify([
{name:"BtMG §2.1",desc:"Drogenbesitz Klein",w:1,f:15000}
])
}

let currentRole="user";

/* LOGIN */
function login(){
let users=JSON.parse(localStorage.users);
let found=users.find(x=>x.u===user.value && x.p===pin.value);
if(!found)return alert("Falsch");
currentRole=found.r;
login.style.display="none";
app.style.display="block";
if(currentRole==="admin") adminTab.classList.remove("hidden");
render();
}

/* NAV */
function show(id,el){
document.querySelectorAll(".content>div").forEach(d=>d.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
}
function logout(){location.reload()}

/* USERS */
function addUser(){
let u=JSON.parse(localStorage.users);
u.push({u:newUser.value,p:newPin.value,r:"user"});
localStorage.users=JSON.stringify(u);
render();
}
function renderUsers(){
let u=JSON.parse(localStorage.users);
userList.innerHTML=u.map(x=>`${x.u} (${x.r})`).join("<br>");
}

/* LAWS */
function addLaw(){
let l=JSON.parse(localStorage.laws);
l.push({name:lawName.value,desc:lawDesc.value,w:lawWanted.value,f:lawFine.value});
localStorage.laws=JSON.stringify(l);
render();
}
function renderLaws(){
let l=JSON.parse(localStorage.laws);
lawList.innerHTML=l.map(x=>`${x.name} – ${x.desc} (${x.w}W / $${x.f})`).join("<br>");
}

/* RENDER */
function render(){
renderUsers();
renderLaws();
}
</script>

</body>
</html>
