<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>LSPD Penal Code - V.17.0</title>
    <style>
        :root {
            --bg-main: #0b0e14;
            --bg-card: #151921;
            --bg-input: #0d1117;
            --accent-pink: #ff2e7e;
            --text-main: #ffffff;
            --text-muted: #8b949e;
            --border-color: #21262d;
            --gold: #d4af37;
            --silver: #5e6673;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; user-select: none; }
        body { margin: 0; background-color: var(--bg-main); color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }

        .container { display: grid; grid-template-columns: 1fr 420px; width: 100%; height: 100vh; padding: 20px; gap: 20px; }

        .main-panel { display: flex; flex-direction: column; overflow: hidden; }
        .header-area { padding: 10px 0; display: flex; justify-content: space-between; align-items: center; }
        .logo-title { font-size: 24px; font-weight: bold; }
        .pink { color: var(--accent-pink); }
        
        .search-field { width: 100%; background: var(--bg-card); border: 1px solid var(--border-color); padding: 12px; border-radius: 8px; color: white; outline: none; margin-bottom: 15px; }
        .cards-scroll-area { flex: 1; overflow-y: auto; padding-right: 10px; }

        .law-category-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 25px; overflow: hidden; }
        .card-header { background: rgba(255, 46, 126, 0.05); padding: 12px 20px; color: var(--accent-pink); font-weight: bold; text-transform: uppercase; border-bottom: 1px solid var(--border-color); font-size: 13px; text-align: center; }

        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; color: var(--text-muted); font-size: 10px; text-transform: uppercase; padding: 12px; border-bottom: 1px solid var(--border-color); }
        .law-row { border-bottom: 1px solid #1a1e26; cursor: pointer; transition: 0.1s; }
        .law-row:hover { background: #1c222d; }
        .law-row.selected { background: #262c36; border-left: 3px solid var(--accent-pink); }
        .law-row td { padding: 10px 12px; font-size: 12.5px; }
        
        .col-para { color: var(--accent-pink); font-weight: bold; width: 90px; }
        .col-stars { width: 100px; font-size: 14px; letter-spacing: 1px; }
        .col-money { text-align: right; color: var(--gold); font-weight: bold; width: 100px; }
        
        .star-gold { color: var(--gold); }
        .star-silver { color: var(--silver); }

        .sidebar { display: flex; flex-direction: column; gap: 12px; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .stat-card { background: var(--bg-card); border-radius: 10px; padding: 12px; border: 1px solid var(--border-color); text-align: center; }
        .stat-label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; font-weight: bold; }
        .stat-value { font-size: 24px; font-weight: bold; margin-top: 4px; }
        .stat-value.gold { color: var(--gold); }
        
        .grund-container { background: var(--bg-card); border-radius: 10px; padding: 12px; border: 1px solid var(--border-color); display: none; }

        .settings-card { background: var(--bg-card); border-radius: 10px; padding: 15px; border: 1px solid var(--border-color); }
        .switch-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; cursor: pointer; border-bottom: 1px solid #1a1e26; }
        .toggle { width: 34px; height: 18px; background: #30363d; border-radius: 10px; position: relative; }
        .toggle::after { content: ''; position: absolute; width: 14px; height: 14px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: 0.2s; }
        .active .toggle { background: var(--accent-pink); }
        .active .toggle::after { transform: translateX(16px); }

        .output-card { background: var(--bg-card); border-radius: 10px; padding: 12px; border: 1px solid var(--border-color); flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        #generatedEntry { background: #0a0c10; border-left: 3px solid var(--accent-pink); padding: 10px; font-size: 11px; color: #8b949e; flex: 1; overflow-y: auto; font-style: italic; margin-bottom: 8px; cursor: pointer; }
        
        .modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .modal-content { background: #151921; width: 850px; height: 85vh; border-radius: 15px; border: 1px solid var(--accent-pink); display: flex; flex-direction: column; overflow: hidden; }
        .modal-body { flex: 1; overflow-y: auto; padding: 25px; color: #d1d5da; font-size: 14px; line-height: 1.6; }
        .close-icon { cursor: pointer; font-size: 24px; color: var(--text-muted); padding: 15px; text-align: right; }
        .belehrung-title { color: var(--accent-pink); font-weight: bold; margin-top: 15px; display: block; border-bottom: 1px solid #333; }
    </style>
</head>
<body>

<div class="container">
    <div class="main-panel">
        <div class="header-area"><div class="logo-title">üõ°Ô∏è LSPD <span class="pink">PENAL</span> CODE</div></div>
        <input type="text" id="searchInput" class="search-field" placeholder="Suche nach Tatbestand..." onkeyup="filterTable()">
        <div class="cards-scroll-area" id="cardsContainer"></div>
    </div>

    <div class="sidebar">
        <div class="stats-grid">
            <div class="stat-card"><span class="stat-label">Bussgeld</span><div class="stat-value gold" id="outM">$0</div></div>
            <div class="stat-card"><span class="stat-label">Wanteds</span><div class="stat-value" id="outW" style="color:#f1fa8c">0 ‚òÖ</div></div>
        </div>

        <div class="grund-container" id="grundBox">
            <span class="stat-label">Grund / Aktenzeichen</span>
            <input type="text" id="inGrund" class="small-input" style="width:100%; background:var(--bg-input); border:1px solid var(--accent-pink); color:white; padding:8px; border-radius:6px; margin-top:5px;" placeholder="Grund eingeben..." oninput="updateDisplay()">
        </div>

        <div class="settings-card">
            <div class="switch-row" id="swRights" onclick="toggleSwitch(this)"><span>Rechte verlesen?</span><div class="toggle"></div></div>
            <div class="switch-row" id="sw35" onclick="toggleSwitch(this)"><span>Reue zeigen (-20%)</span><div class="toggle"></div></div>
            <div class="switch-row" id="swHaft" onclick="toggleHaftSwitch(this)"><span>Haftbefehl / Beschluss</span><div class="toggle"></div></div>

            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 12px;">
                <button onclick="openModal('modalAnwalt')" style="background:#1c222d; border:1px solid #21262d; color:#ff2e7e; padding:8px; border-radius:6px; cursor:pointer; font-size:10px; font-weight:bold;">ANW√ÑLTE</button>
                <button onclick="openModal('modalRechte')" style="background:#1c222d; border:1px solid #21262d; color:#ff2e7e; padding:8px; border-radius:6px; cursor:pointer; font-size:10px; font-weight:bold;">RECHTE</button>
                <button onclick="openModal('modalBelehrung')" style="background:#1c222d; border:1px solid #21262d; color:#ff2e7e; padding:8px; border-radius:6px; cursor:pointer; font-size:10px; font-weight:bold;">BELEHRUNG</button>
            </div>
        </div>

        <div class="output-card">
            <div id="generatedEntry" onclick="copyText()">W√§hle Tatbest√§nde aus...</div>
            <button onclick="location.reload()" style="background:transparent; border:1px solid #30363d; color:var(--text-muted); padding:8px; border-radius:5px; cursor:pointer; width:100%; font-size:10px;">Reset</button>
        </div>
    </div>
</div>

<div id="modalRechte" class="modal-overlay" onclick="closeModal('modalRechte')">
    <div class="modal-content" onclick="event.stopPropagation()" style="height:auto; max-width:600px;">
        <div class="close-icon" onclick="closeModal('modalRechte')">&times;</div>
        <div class="modal-body" style="text-align:center;">
            <p>Sie haben das Recht zu schweigen, alles was Sie sagen kann und wird gegen Sie verwendet werden. Ab 3 Wanteds haben Sie das Recht auf einen staatlich anerkannten Anwalt, den Sie selbst benennen m√ºssen. Wenn kein Anwalt verf√ºgbar ist, wird Ihnen keiner gestellt. Die Judikative √ºbernimmt der Exekutivbeamte. Wenn ein Anwalt hinzugezogen wird, kann es l√§nger als 25 Minuten dauern.</p>
            <p style="color:var(--accent-pink); font-weight:bold;">Haben Sie ihre Rechte verstanden?</p>
        </div>
    </div>
</div>

<div id="modalBelehrung" class="modal-overlay" onclick="closeModal('modalBelehrung')">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="close-icon" onclick="closeModal('modalBelehrung')">&times;</div>
        <div class="modal-body">
            <span class="belehrung-title">Belehrung Haftbefehl</span>
            <p>"Die Justiz hat einen Haftbefehl gegen Sie erlassen, Sie haben das Recht zu schweigen. Alles, was Sie sagen, kann und wird gegen Sie verwendet werden. Sie haben das Recht gegen den Haftbefehl vor Gericht zu ziehen..."</p>
            <span class="belehrung-title">Belehrung Beschluss</span>
            <p>"Die Justiz hat einen Beschluss gegen Sie erlassen, Sie haben das Recht zu schweigen. Alles, was Sie sagen, kann und wird gegen Sie verwendet werden..."</p>
            <span class="belehrung-title">Belehrung Befragung</span>
            <p>‚ÄûSie haben das Recht zu schweigen. Alles, was Sie sagen, kann und wird vor Gericht gegen Sie verwendet werden. Sie haben das Recht, zu jeder Vernehmung einen Rechtsanwalt hinzuzuziehen. Haben Sie das verstanden?‚Äú</p>
        </div>
    </div>
</div>

<div id="modalAnwalt" class="modal-overlay" onclick="closeModal('modalAnwalt')">
    <div class="modal-content" style="width:90vw; height:90vh;">
        <div class="close-icon" onclick="closeModal('modalAnwalt')">&times;</div>
        <iframe src="https://docs.google.com/spreadsheets/d/1DufMS-4hxX75e9bJk_z3jSHqCcO6JmimoqYh6M94zP0/edit#gid=690010630"></iframe>
    </div>
</div>

<script>
const laws = [
  { cat: "Psychische & Physische Integrit√§t (StGB)", items: [
    {p:"StGB ¬ß3.1", n:"Beleidigung", m:10000, w:0, gs:1},
    {p:"StGB ¬ß3.2", n:"Bel√§stigung", m:10000, w:0, gs:1},
    {p:"StGB ¬ß4.1", n:"Versuchter Mord / Mord", m:30000, w:4, gs:0},
    {p:"StGB ¬ß4.2", n:"K√∂rperverletzung", m:15000, w:2, gs:0},
    {p:"StGB ¬ß4.3", n:"K√∂rperverletzung mit Todesfolge", m:20000, w:3, gs:0},
    {p:"StGB ¬ß4.4", n:"Gewaltsame Drohung", m:5000, w:1, gs:1},
    {p:"StGB ¬ß27", n:"Geiselnahme / Entf√ºhrung", m:30000, w:3, gs:0},
    {p:"StGB ¬ß42", n:"Erpressung", m:45000, w:3, gs:0}
  ]},
  { cat: "Wirtschaftskriminalit√§t (StGB)", items: [
    {p:"StGB ¬ß6", n:"Diebstahl / Betrug", m:5000, w:0, gs:3},
    {p:"StGB ¬ß7", n:"Fahrzeug Diebstahl", m:10000, w:2, gs:0},
    {p:"StGB ¬ß11", n:"Raub", m:25000, w:3, gs:0},
    {p:"StGB ¬ß12.1", n:"Gesch√§fts Raub / Ammu Rob", m:35000, w:2, gs:0},
    {p:"StGB ¬ß41.1", n:"Besitz staatl. Eigentum (Waffen)", m:50000, w:3, gs:0}
  ]},
  { cat: "Umgang mit Beamten (StGB)", items: [
    {p:"StGB ¬ß15.1", n:"Nichtbeachten amtl. Anweisung", m:10000, w:0, gs:2},
    {p:"StGB ¬ß15.5", n:"Widerstand gegen Vollstreckungsbeamte", m:20000, w:2, gs:0},
    {p:"StGB ¬ß16", n:"Befreiung von Gefangenen", m:10000, w:3, gs:2},
    {p:"StGB ¬ß24", n:"Amtsanma√üung", m:25000, w:2, gs:1}
  ]},
  { cat: "Stra√üenverkehrsordnung (StVO)", items: [
    {p:"StVO ¬ß8", n:"Geschw. ab 101 km/h", m:20000, w:0, gs:0},
    {p:"StVO ¬ß17", n:"Fahren im berauschten Zustand", m:10000, w:0, gs:2},
    {p:"StVO ¬ß24", n:"Fahrerflucht", m:10000, w:1, gs:0},
    {p:"StVO ¬ß28", n:"Sharing-Cars mit Anti-Radar", m:30000, w:3, gs:0}
  ]},
  { cat: "Bet√§ubungsmittelgesetz (BtMG)", items: [
    {p:"BtMG ¬ß2.1", n:"Drogenbesitz Gro√ü 50+", m:30000, w:2, gs:0},
    {p:"BtMG ¬ß2.2", n:"Drogenhandel", m:30000, w:3, gs:0}
  ]},
  { cat: "Strafprozessordnung (StPO)", items: [
    {p:"¬ß6 StPO", n:"Bu√ügelder nicht bezahlt", m:0, w:5, gs:0}
  ]}
];

let selectedItems = [];

function getStarsHTML(goldCount, silverCount) {
    let html = "";
    for(let i=0; i<goldCount; i++) html += '<span class="star-gold">‚òÖ</span>';
    for(let i=0; i<silverCount; i++) html += '<span class="star-silver">‚òÜ</span>';
    return html || "-";
}

function render() {
    const container = document.getElementById('cardsContainer');
    container.innerHTML = "";
    laws.forEach(c => {
        let card = document.createElement('div');
        card.className = "law-category-card";
        let table = `<table><thead><tr><th>¬ß</th><th>Tatbestand</th><th>Wanteds</th><th style="text-align:right">Geld</th></tr></thead><tbody>`;
        c.items.forEach(i => {
            table += `<tr class="law-row" data-search="${i.p} ${i.n}" onclick="toggleLaw(this, ${JSON.stringify(i).replace(/"/g, '&quot;')})">
                <td class="col-para">${i.p}</td>
                <td>${i.n}</td>
                <td class="col-stars">${getStarsHTML(i.w, i.gs)}</td>
                <td class="col-money">$${i.m.toLocaleString()}</td>
            </tr>`;
        });
        card.innerHTML = `<div class="card-header">${c.cat}</div>` + table + `</tbody></table>`;
        container.appendChild(card);
    });
}

function toggleLaw(el, obj) {
    el.classList.toggle('selected');
    if(el.classList.contains('selected')) selectedItems.push(obj);
    else selectedItems = selectedItems.filter(l => l.p !== obj.p || l.n !== obj.n);
    updateDisplay();
}

function toggleHaftSwitch(el) {
    el.classList.toggle('active');
    document.getElementById('grundBox').style.display = el.classList.contains('active') ? 'block' : 'none';
    updateDisplay();
}

function updateDisplay() {
    let totalM = 0; let maxW = 0;
    selectedItems.forEach(l => { totalM += l.m; if(l.w > maxW) maxW = l.w; });
    const reue = document.getElementById('sw35').classList.contains('active');
    if(reue) totalM *= 0.8;

    document.getElementById('outM').innerText = '$' + Math.floor(totalM).toLocaleString();
    document.getElementById('outW').innerText = maxW + ' ‚òÖ';

    const entryBox = document.getElementById('generatedEntry');
    const rights = document.getElementById('swRights').classList.contains('active');
    const haft = document.getElementById('swHaft').classList.contains('active');
    const grund = document.getElementById('inGrund').value;

    let text = "";
    if(selectedItems.length > 0 || haft) {
        const now = new Date();
        text = `${now.toLocaleDateString('de-DE')} | `;
        if(haft) text += `[HB${grund ? ': '+grund : ''}] `;
        text += selectedItems.map(l => l.p).join(", ");
        if(maxW > 0) text += ` | ${maxW}‚òÖ`;
    }

    if(!rights && (selectedItems.length > 0 || haft)) {
        entryBox.innerText = "‚ö†Ô∏è RECHTE NOCH NICHT VERLESEN!";
    } else {
        entryBox.innerText = text || "W√§hle Tatbest√§nde aus...";
    }
}

function copyText() {
    const entry = document.getElementById('generatedEntry').innerText;
    if(entry.includes("W√§hle") || entry.includes("‚ö†Ô∏è")) return;
    navigator.clipboard.writeText(entry);
}

function filterTable() {
    const v = document.getElementById('searchInput').value.toLowerCase();
    document.querySelectorAll('.law-row').forEach(r => r.style.display = r.getAttribute('data-search').toLowerCase().includes(v) ? "" : "none");
}

function toggleSwitch(el) { el.classList.toggle('active'); updateDisplay(); }
function openModal(id) { document.getElementById(id).style.display = "flex"; }
function closeModal(id) { document.getElementById(id).style.display = "none"; }

render();
</script>
</body>
</html>
