<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>LSPD MDT</title>

<style>
:root{
  --bg:#0b0b0d;
  --panel:#141417;
  --panel2:#1d1d22;
  --border:#2a2a30;
  --accent:#ff4f9a;
  --text:#e8e8ea;
  --muted:#9a9aa2;
}
*{box-sizing:border-box}
body{
  margin:0;height:100vh;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:
    radial-gradient(1200px at 20% -20%, rgba(255,79,154,.08), transparent),
    linear-gradient(180deg,#0b0b0d,#101014);
  color:var(--text);
}
button,input{font-family:inherit}

/* LOGIN */
#login{
  position:fixed;inset:0;
  display:flex;align-items:center;justify-content:center;
}
.login-box{
  width:360px;padding:28px;
  background:rgba(20,20,23,.95);
  border:1px solid var(--border);
  border-radius:20px;
  box-shadow:0 40px 120px rgba(0,0,0,.85);
}
.login-box h2{text-align:center;margin-bottom:20px}
.login-box input{
  width:100%;padding:12px;margin-top:12px;
  border-radius:12px;border:1px solid var(--border);
  background:#0e0e11;color:var(--text);
}
.login-box button{
  width:100%;margin-top:20px;
  padding:12px;border:none;border-radius:14px;
  background:linear-gradient(180deg,#ff5aa5,#ff2f85);
  color:white;font-weight:600;cursor:pointer;
}
.small{text-align:center;font-size:12px;color:var(--muted);margin-top:14px}

/* APP */
#app{display:flex;height:100vh}
aside{
  width:230px;
  background:rgba(18,18,21,.96);
  border-right:1px solid var(--border);
}
aside h1{
  padding:18px;font-size:14px;
  border-bottom:1px solid var(--border);
  color:var(--accent);
}
.nav-btn{
  width:100%;padding:12px 18px;
  background:none;border:none;
  color:var(--text);text-align:left;
  cursor:pointer;
}
.nav-btn:hover{background:#202026}
.nav-btn.active{background:#24242b;color:var(--accent)}
main{flex:1;padding:24px;overflow:auto}

.card{
  background:rgba(26,26,30,.92);
  border:1px solid var(--border);
  border-radius:22px;
  padding:22px;
  box-shadow:0 25px 70px rgba(0,0,0,.7);
  margin-bottom:20px;
}
h3{margin-top:0}

/* TABLE */
table{width:100%;border-collapse:collapse}
td,th{padding:8px;font-size:13px;border-bottom:1px solid var(--border)}
th{text-align:left;color:var(--muted)}
.toggle{cursor:pointer;color:var(--accent)}
</style>
</head>

<body>

<div id="login">
  <div class="login-box">
    <h2>LSPD MDT</h2>
    <input id="user" placeholder="Benutzer">
    <input id="pass" type="password" placeholder="Passwort">
    <button onclick="doLogin()">Anmelden</button>
    <div class="small">ADMIN / 9999 ¬∑ LSPD / 1234</div>
  </div>
</div>

<script>
/* ===== USERS ===== */
let USERS = JSON.parse(localStorage.users||"null") || [
  {u:"ADMIN",p:"9999",r:"admin",active:true},
  {u:"LSPD",p:"1234",r:"officer",active:true}
];
localStorage.users = JSON.stringify(USERS);

let CURRENT = null;

/* ===== LOGIN ===== */
function doLogin(){
  const u=user.value.trim();
  const p=pass.value.trim();
  const found=USERS.find(x=>x.u===u && x.p===p && x.active);
  if(!found){alert("Login fehlgeschlagen");return;}
  CURRENT=found;
  document.body.innerHTML="";
  initApp();
}

/* ===== APP ===== */
function initApp(){
  document.body.innerHTML=`
  <div id="app">
    <aside>
      <h1>MDT</h1>
      <button class="nav-btn active" onclick="nav(this,'leitstelle')">Leitstelle</button>
      <button class="nav-btn" onclick="nav(this,'rechner')">Strafrechner</button>
      <button class="nav-btn" onclick="nav(this,'personen')">Personen</button>
      ${CURRENT.r==="admin"?`<button class="nav-btn" onclick="nav(this,'admin')">Admin</button>`:""}
      <button class="nav-btn" onclick="logout()">Logout</button>
    </aside>
    <main id="content"></main>
  </div>`;
  render("leitstelle");
}

function logout(){location.reload()}

function nav(btn,t){
  document.querySelectorAll(".nav-btn").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  render(t);
}

/* ===== DATA ===== */
let einsaetze=[];
let personen=[];

/* ===== RENDER ===== */
function render(t){
  const c=document.getElementById("content");
  if(t==="leitstelle"){
    c.innerHTML=`
    <div class="card">
      <h3>üö® Leitstelle</h3>
      Aktive Eins√§tze: ${einsaetze.length}<br>
      Personenakten: ${personen.length}
    </div>`;
  }

  if(t==="rechner"){
    c.innerHTML=`
    <div class="card">
      <h3>‚öñÔ∏è Strafrechner</h3>
      <button onclick="alert('Strafen k√∂nnen hier erweitert werden')">Strafe hinzuf√ºgen</button>
      <p style="color:var(--muted)">Reue ¬ß35 & Rechte-Schalter integrierbar</p>
    </div>`;
  }

  if(t==="personen"){
    c.innerHTML=`
    <div class="card">
      <h3>üë§ Personenakten</h3>
      <button onclick="personen.push({});render('personen')">Neue Person</button>
      <p>Gesamt: ${personen.length}</p>
    </div>`;
  }

  if(t==="admin"){
    c.innerHTML=`
    <div class="card">
      <h3>üîê Admin-Panel</h3>
      <table>
        <tr><th>User</th><th>Rolle</th><th>Status</th></tr>
        ${USERS.map((u,i)=>`
          <tr>
            <td>${u.u}</td>
            <td class="toggle" onclick="toggleRole(${i})">${u.r}</td>
            <td class="toggle" onclick="toggleActive(${i})">${u.active?"aktiv":"gesperrt"}</td>
          </tr>`).join("")}
      </table>
    </div>`;
  }
}

/* ===== ADMIN ===== */
function toggleRole(i){
  USERS[i].r=USERS[i].r==="admin"?"officer":"admin";
  localStorage.users=JSON.stringify(USERS);
  render("admin");
}
function toggleActive(i){
  USERS[i].active=!USERS[i].active;
  localStorage.users=JSON.stringify(USERS);
  render("admin");
}
</script>

</body>
</html>
